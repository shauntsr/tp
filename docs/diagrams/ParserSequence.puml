
@startuml ParserSequence
hide footbox

actor User
participant ":Zettel"
participant ":UI"
participant ":Parser"
participant ":Validator"
participant ":DeleteNoteCommand"
participant ":Storage"

User -> ":Zettel": input "delete -f abc12345"
activate ":Zettel"
":Zettel" -> ":UI": readCommand()
activate ":UI"
":UI" --> ":Zettel": "delete -f abc12345"
deactivate ":UI"

":Zettel" -> ":Parser": parse(userInput)
activate ":Parser"

":Parser" -> ":Validator": validateCommandInput(userInput)
alt Validation fails
    ":Validator" --> ":Zettel": throws ZettelException
    ":Zettel" -> ":UI": showError()
else Validation passes
    ":Parser" --> ":Zettel": DeleteNoteCommand(noteId="abc12345", isForce=true)

    ":Zettel" -> ":DeleteNoteCommand": execute(notes, tags, ui, storage)
    activate ":DeleteNoteCommand"

    ":DeleteNoteCommand" -> ":Storage": deleteStorageFile("abc12345.txt")
    activate ":Storage"
    ":Storage" --> ":DeleteNoteCommand": deletion complete
    deactivate ":Storage"

    ":DeleteNoteCommand" -> ":Storage": save(notes)
    activate ":Storage"
    ":Storage" --> ":DeleteNoteCommand": notes saved
    deactivate ":Storage"

    ":DeleteNoteCommand" --> ":Zettel": execution complete
    deactivate ":DeleteNoteCommand"
end
deactivate ":Parser"

":Zettel" --> "User"
deactivate ":Zettel"
@enduml
