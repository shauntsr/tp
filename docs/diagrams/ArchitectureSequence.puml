
@startuml ArchitectureSequence
hide footbox

actor User
participant ":Zettel"
participant ":UI"
participant ":Parser"
participant ":Validator"
participant ":Command"
participant ":Storage"

User -> ":Zettel": input "new -t MyNote -b Content"
activate ":Zettel"
":Zettel" -> ":UI": readCommand()
activate ":UI"
":UI" --> ":Zettel": "new -t MyNote -b Content"
deactivate ":UI"

":Zettel" -> ":Parser": parse(userInput)
activate ":Parser"

":Parser" -> ":Validator": validateCommandInput(userInput)
alt Validation fails
    ":Validator" --> ":Zettel": throws ZettelException
    ":Zettel" -> ":UI": showError()
else Validation passes
    ":Parser" --> ":Zettel": NewNoteCommand

    ":Zettel" -> ":Command": execute(notes, tags, ui, storage)
    activate ":Command"

    ":Command" -> ":Storage": add note
    activate ":Storage"
    ":Storage" --> ":Command": modification done
    deactivate ":Storage"

    ":Command" -> ":UI": showAddedNote()
    activate ":UI"
    ":UI" --> ":Command": done
    deactivate ":UI"

    ":Command" --> ":Zettel": execution complete
    deactivate ":Command"
end
deactivate ":Parser"

":Zettel" --> "User"
deactivate ":Zettel"
@enduml
